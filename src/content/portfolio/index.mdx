import SoftwareSection from '../../components/software'

export default function Index(props) {
  const projects = props.nodes
    .filter(({ frontmatter }) => frontmatter.slug === "portfolio")
    .map(
      ({ frontmatter }) => {
        if(frontmatter.website.includes(', ')){
            const websites = frontmatter.website.split(', ')
            const website1 = websites[0]
            const website2 = websites[1]

            return  (
              <div className="ml-2 mb-8 md:ml-5" key={frontmatter.title}>
                <div className="text-xl">{frontmatter.title}</div>
                <a target="_blank" rel="noopener noreferrer" href={website1} className="underline">{website1}</a>
                <br/>
                <a target="_blank" rel="noopener noreferrer" href={website2} className="underline">{website2}</a>
                <div className="text-md">{frontmatter.sub}</div>
                <ul>{frontmatter.descriptionArray.map((d, i)=><li key={i} className="text-md">{d}</li>)}</ul>
              </div>
              );
        }

        return (
          <div className="ml-2 mb-8 md:ml-5" key={frontmatter.title}>
            <div className="text-xl">{frontmatter.title}</div>
            <a target="_blank" rel="noopener noreferrer" href={frontmatter.website} className="underline">{frontmatter.website}</a>
            <div className="text-md">{frontmatter.sub}</div>
            <ul>{frontmatter.descriptionArray.map((d, i)=><li key={i} className="text-md">{d}</li>)}</ul>
          </div>
        );
      },
      [props],
    );

return (

<SoftwareSection section="portfolio">{projects}</SoftwareSection>
); }
